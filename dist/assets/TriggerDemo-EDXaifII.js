import{d as V,r as f,e as r,h as l,i as _,k as t,y as x,l as v,m as g,j as h,f as O,v as k,w as T,O as A,ak as F,C as L,I as w,al as C,p as R,H as q}from"./index-DatEjxfX.js";const z={class:"payments-portal-container"},H={class:"payments-portal flex items-center justify-center p-24 border border-grey-200 rounded-xl shadow-solid-shadow-grey relative"},P={key:0,class:"flex items-center justify-center w-full gap-4"},U={class:"form flex-col gap-[24px] w-[225px] sm:w-[325px]"},W={class:"flex-col"},Y={style:{position:"relative"}},G=["value"],J={class:"visa credit-card"},K=["src"],Q={class:"mastercard credit-card"},X=["src"],Z={class:"canary credit-card"},ee=["src"],te={class:"flex gap-[24px]"},se={class:"flex-col form-col w-full"},oe=["value"],ae={class:"flex-col form-col w-full"},ne=["value"],re={key:0,class:"error"},ie=["disabled"],le={key:1},ce={class:"text-center"},de={class:"payment-received"},ue=V({__name:"TriggerDemo",props:{tokenData:{}},emits:["close"],setup(D,{emit:$}){const o=D,j=$,c=f(0),a=f(!1),d=f(!1),B=["Use our purpose-built store to test your new Canary Credit Card.","It's probably a lot easier than testing it against a live store (and is probably a lot less illegal too)."];function u(s,e){return Math.random()*(e-s)+s}function N(s){var e;return`${(e=s.match(/(\d{4})/g))==null?void 0:e.join(" ")}`}function E(){const s=document.createElement("canvas"),e=document.querySelector(".payments-portal");e==null||e.appendChild(s),Object.assign(s.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"}),Object.assign(s,{with:window.innerWidth,height:window.innerHeight});const m=C.create(s,{resize:!0}),i=25*1e3,p=Date.now()+i;let n=2;const y=C.shapeFromText({text:"ðŸ’µ",scalar:1.5});(function M(){const b=p-Date.now(),S=Math.max(200,500*(b/i));n=Math.max(.8,n-.001),m({particleCount:1,startVelocity:0,ticks:S,origin:{x:Math.random()*5,y:Math.random()*n-.2},shapes:[y],gravity:u(.2,.3),scalar:u(1.5,1.5),drift:u(-.4,.4)}),b>0&&requestAnimationFrame(M)})()}async function I(){d.value=!1;try{a.value=!0,await F(o.tokenData.card_id,o.tokenData.card_number),c.value=1,E()}catch(s){console.log(s),d.value=!0}finally{a.value=!1}}return(s,e)=>{const m=L,i=w("font-awesome-icon"),p=R,n=w("RouterLink");return r(),l(A,null,[_(m,{class:"mb-24 w-fit",variant:"info",messages:B}),t("div",z,[t("div",H,[t("button",{onClick:e[0]||(e[0]=y=>j("close")),class:"close h-[2rem] w-[2rem] font-semibold text-white rounded-full bg-green hover:bg-green-300 transition duration-100"},[_(i,{icon:"times","aria-hidden":"true",class:x(a.value&&"opacity-30")},null,8,["class"])]),c.value===0?(r(),l("div",P,[t("div",U,[t("div",W,[e[1]||(e[1]=t("p",{class:"mb-[28px] p-[16px] mt-[24px] lg:mt-[12px]"}," We'll generate a fake transaction that'll trigger alert notifications for this token. ",-1)),e[2]||(e[2]=t("label",{class:"form-label"},"Card Number",-1)),t("div",Y,[t("input",{disabled:"",value:N(o.tokenData.card_number)},null,8,G),t("div",J,[t("img",{src:v(g)("icons/credit-card-token/visa.svg")},null,8,K)]),t("div",Q,[t("img",{src:v(g)("icons/credit-card-token/mastercard.svg")},null,8,X)]),t("div",Z,[t("img",{src:v(g)("icons/credit-card-token/canary.svg")},null,8,ee)])])]),t("div",te,[t("div",se,[e[3]||(e[3]=t("label",{class:"form-label"},"Expiration date",-1)),t("input",{disabled:"",value:`${o.tokenData.expiry_month}/${o.tokenData.expiry_year}`},null,8,oe)]),t("div",ae,[e[4]||(e[4]=t("label",{class:"form-label"},"Security code",-1)),t("input",{disabled:"",value:o.tokenData.cvv},null,8,ne)])]),d.value?(r(),l("div",re,"Oops... Something went wrong!")):h("",!0),t("button",{type:"button",onClick:I,class:x({loading:a.value}),disabled:a.value},[a.value?(r(),O(p,{key:0,height:"1.5rem",variant:"secondary",class:"absolute left-0 right-0 ml-auto mr-auto"})):h("",!0),e[5]||(e[5]=t("span",null,"Pay $100.00",-1))],10,ie)])])):c.value===1?(r(),l("div",le,[t("div",ce,[e[8]||(e[8]=t("p",{class:"payment-received-header"},"Payment received!",-1)),t("p",de,[e[7]||(e[7]=k("You'll get a notification soon if you ")),_(n,{to:`/history/${o.tokenData.auth}/${o.tokenData.token}`,class:"text-green-600 hover:text-green-500 font-bold"},{default:T(()=>e[6]||(e[6]=[k(" haven't already. ")])),_:1},8,["to"])])])])):h("",!0)])])],64)}}}),pe=q(ue,[["__scopeId","data-v-90d8106a"]]);export{pe as default};
