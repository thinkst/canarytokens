import{d as h,r as f,z as D,a as i,c as p,f as t,i as c,E as _,n as $,b as N,e as v,y as T,I as A,u as w,g as C,h as y,j as B,ae as L,a8 as R,af as V,$ as z,q as O}from"./index-Df32NadT.js";import{_ as P}from"./BaseCopyButton-5QteieQp.js";const U={class:"content-block flex items-center justify-between gap-8 sm:gap-24 py-8 px-[1em] text-grey-500 border border-grey-100 rounded-xl bg-white hover:text-grey-700"},W={class:"flex items-center"},H={class:"block text-xs font-light text-grey-800 mb-1.5"},Y=h({__name:"BaseContentBlock",props:{label:{},text:{},copyContent:{type:Boolean},iconName:{}},setup(u){const d=u,e=f(!1),m=()=>{e.value=!0,setTimeout(()=>{e.value=!1},1750)};return(a,o)=>{const s=D("font-awesome-icon"),l=P;return i(),p("span",U,[t("div",W,[c(s,{class:"text-grey-200 mr-8 sm:mr-[.75em] text-lg sm:text-xl","aria-hidden":"true",icon:a.iconName},null,8,["icon"]),t("div",null,[t("span",H,_(d.label),1),t("span",{class:$(["block text-grey-800 font-medium",{copied:e.value}])},_(d.text),3)])]),a.copyContent?(i(),N(l,{key:0,content:d.text,class:"ring-white ring-4",onClick:o[0]||(o[0]=j=>m())},null,8,["content"])):v("",!0)])}}}),G=T(Y,[["__scopeId","data-v-47394c61"]]),J={id:"cc-card",class:"w-[280px] h-[11em] sm:w-[20.5em] sm:h-[13em] relative m-auto text-white"},K={class:"absolute top-[60px] sm:top-[75px] left-[20px] sm:left-[25px] text-base sm:text-lg"},Q={class:"absolute top-[85px] sm:top-[100px] left-[20px] sm:left-[25px] text-base sm:text-lg"},X={class:"absolute top-[135px] sm:top-[160px] left-[20px] sm:left-[25px] text-base sm:text-lg"},Z={class:"absolute top-[135px] sm:top-[160px] left-[135px] sm:left-[165px] text-base sm:text-lg"},tt={class:"grid grid-cols-6 p-16 text-sm grid-flow-row-dense gap-8 mt-24 items-center border border-grey-200 rounded-xl shadow-solid-shadow-grey bg-white"},et=h({__name:"CreditCardToken",props:{tokenData:{}},emits:["close"],setup(u,{emit:d}){const e=u;function m(a){var o;return`${(o=a.match(/(\d{4})/g))==null?void 0:o.join(" ")}`}return(a,o)=>{const s=G;return i(),p(A,null,[t("div",J,[t("span",K,_(e.tokenData.name_on_card),1),t("span",Q,_(m(e.tokenData.card_number)),1),t("span",X,_(e.tokenData.expiry_month)+"/"+_(e.tokenData.expiry_year),1),t("span",Z,_(e.tokenData.cvv),1)]),t("div",tt,[c(s,{class:"col-span-6 xl:col-span-6",label:"Card Name",text:e.tokenData.name_on_card,"icon-name":"id-card","copy-content":""},null,8,["text"]),c(s,{class:"col-span-6 xl:col-span-6",label:"Card Number",text:m(e.tokenData.card_number),"icon-name":"credit-card","copy-content":""},null,8,["text"]),c(s,{class:"col-span-6 lg:col-span-3",label:"Expires",text:`${e.tokenData.expiry_month}/${e.tokenData.expiry_year}`,"icon-name":"calendar-day","copy-content":""},null,8,["text"]),c(s,{class:"col-span-6 lg:col-span-3",label:"CVV",text:e.tokenData.cvv,"icon-name":"lock","copy-content":""},null,8,["text"])])],64)}}}),ot=T(et,[["__scopeId","data-v-73b12c2d"]]),nt={class:"payments-portal-container"},st={class:"payments-portal flex items-center justify-center p-24 border border-grey-200 rounded-xl shadow-solid-shadow-grey relative"},at={key:0,class:"flex items-center justify-center w-full gap-4"},lt={class:"form flex-col gap-[24px] w-[225px] sm:w-[325px]"},rt={class:"flex-col"},it={style:{position:"relative"}},ct=["value"],dt={class:"visa credit-card"},mt=["src"],pt={class:"mastercard credit-card"},ut=["src"],_t={class:"canary credit-card"},ft=["src"],xt={class:"flex gap-[24px]"},gt={class:"flex-col form-col w-full"},vt=["value"],yt={class:"flex-col form-col w-full"},ht=["value"],kt={key:0,class:"error"},bt=["disabled"],wt={key:1},Ct={class:"text-center"},Dt={class:"payment-received"},$t=h({__name:"TriggerDemo",props:{tokenData:{}},emits:["close"],setup(u,{emit:d}){const e=u,m=d,a=f(0),o=f(!1),s=f(!1);function l(r,n){return Math.random()*(n-r)+r}function j(r){var n;return`${(n=r.match(/(\d{4})/g))==null?void 0:n.join(" ")}`}function I(){const r=document.createElement("canvas"),n=document.querySelector(".payments-portal");n==null||n.appendChild(r),Object.assign(r.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"}),Object.assign(r,{with:window.innerWidth,height:window.innerHeight});const k=V.create(r,{resize:!0}),x=25*1e3,b=Date.now()+x;let g=2;const F=V.shapeFromText({text:"ðŸ’µ",scalar:1.5});(function M(){const E=b-Date.now(),q=Math.max(200,500*(E/x));g=Math.max(.8,g-.001),k({particleCount:1,startVelocity:0,ticks:q,origin:{x:Math.random()*5,y:Math.random()*g-.2},shapes:[F],gravity:l(.2,.3),scalar:l(1.5,1.5),drift:l(-.4,.4)}),E>0&&requestAnimationFrame(M)})()}async function S(){s.value=!1;try{o.value=!0,await L(e.tokenData.card_id,e.tokenData.card_number),a.value=1,I()}catch(r){console.log(r),s.value=!0}finally{o.value=!1}}return(r,n)=>{const k=D("font-awesome-icon"),x=R,b=D("RouterLink");return i(),p("div",nt,[t("div",st,[t("button",{onClick:n[0]||(n[0]=g=>m("close")),class:"close h-[2rem] w-[2rem] font-semibold text-white rounded-full bg-green hover:bg-green-300 transition duration-100"},[c(k,{icon:"times","aria-hidden":"true",class:$(o.value&&"opacity-30")},null,8,["class"])]),a.value===0?(i(),p("div",at,[t("div",lt,[t("div",rt,[n[1]||(n[1]=t("p",{class:"mb-[28px] p-[16px] mt-[24px] lg:mt-[12px]"}," We'll generate a fake transaction that'll trigger alert notifications for this token. ",-1)),n[2]||(n[2]=t("label",{class:"form-label"},"Card Number",-1)),t("div",it,[t("input",{disabled:"",value:j(e.tokenData.card_number)},null,8,ct),t("div",dt,[t("img",{src:w(C)("icons/credit-card-token/visa.svg")},null,8,mt)]),t("div",pt,[t("img",{src:w(C)("icons/credit-card-token/mastercard.svg")},null,8,ut)]),t("div",_t,[t("img",{src:w(C)("icons/credit-card-token/canary.svg")},null,8,ft)])])]),t("div",xt,[t("div",gt,[n[3]||(n[3]=t("label",{class:"form-label"},"Expiration date",-1)),t("input",{disabled:"",value:`${e.tokenData.expiry_month}/${e.tokenData.expiry_year}`},null,8,vt)]),t("div",yt,[n[4]||(n[4]=t("label",{class:"form-label"},"Security code",-1)),t("input",{disabled:"",value:e.tokenData.cvv},null,8,ht)])]),s.value?(i(),p("div",kt,"Oops... Something went wrong!")):v("",!0),t("button",{type:"button",onClick:S,class:$({loading:o.value}),disabled:o.value},[o.value?(i(),N(x,{key:0,height:"1.5rem",variant:"secondary",class:"absolute left-0 right-0 ml-auto mr-auto"})):v("",!0),n[5]||(n[5]=t("span",null,"Pay $100.00",-1))],10,bt)])])):a.value===1?(i(),p("div",wt,[t("div",Ct,[n[8]||(n[8]=t("p",{class:"payment-received-header"},"Payment received!",-1)),t("p",Dt,[n[7]||(n[7]=y("You'll get a notification soon if you ")),c(b,{to:`/history/${e.tokenData.auth}/${e.tokenData.token}`,class:"text-green-600 hover:text-green-500 font-bold"},{default:B(()=>n[6]||(n[6]=[y(" haven't already. ")])),_:1},8,["to"])])])])):v("",!0)])])}}}),Bt=T($t,[["__scopeId","data-v-cd0211d6"]]),Nt={class:"flex flex-col items-center min-h-[448px] justify-center"},Tt={key:0},jt={class:"flex flex-col lg:flex-row justify-center items-center gap-16"},It=h({__name:"TokenDisplay",props:{tokenData:{}},setup(u){const d=u,e=f(!1);async function m(){var o,s;const a={fmt:"credit_card_v2",auth:(o=d.tokenData)==null?void 0:o.auth,token:(s=d.tokenData)==null?void 0:s.token};try{const l=await z(a);window.location.href=l.request.responseURL}catch(l){console.log(l,"File download failed")}finally{console.log("Download ready")}}return(a,o)=>{const s=O;return i(),p("div",Nt,[e.value?(i(),N(Bt,{key:1,onClose:o[2]||(o[2]=l=>e.value=!1),"token-data":a.tokenData},null,8,["token-data"])):(i(),p("div",Tt,[c(ot,{"token-data":a.tokenData},null,8,["token-data"]),t("div",jt,[c(s,{variant:"secondary",class:"mt-24",onClick:o[0]||(o[0]=l=>m())},{default:B(()=>o[3]||(o[3]=[y(" Download Credit Card ")])),_:1}),c(s,{class:"mt-24",onClick:o[1]||(o[1]=l=>e.value=!e.value)},{default:B(()=>o[4]||(o[4]=[y(" Test Credit Card ")])),_:1})])]))])}}});export{It as _};
